---
title: 快取共用資料集 (SSRS) | Microsoft Docs
ms.date: 05/14/2019
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: report-server
ms.topic: conceptual
ms.assetid: 4acb1bbe-1c04-4979-b893-dc1b1c5039b6
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 097955ece70dfa411c12d1ee5d69af0de14831e6
ms.sourcegitcommit: b78f7ab9281f570b87f96991ebd9a095812cc546
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/31/2020
ms.locfileid: "66175595"
---
# <a name="cache-shared-datasets-ssrs"></a>快取共用資料集 (SSRS)
  共用資料集的查詢結果可以複製到快取，以便為多個報表提供一致的資料，並改善資料集查詢的回應時間。 跟報表一樣，您可以設定共用資料集在第一次使用時或指定排程進行快取。  
  
 共用資料集可以包含在多個報表中，或做為元件定義的一部分。 您可以透過快取共用資料集，為所有使用該資料集的報表提供一致的資料集，而且也減少資料集查詢依外部資料來源執行的次數。  
  
 下列清單提供要快取共用資料集的範例：  
  
-   查詢需要耗費大量時間來執行。  
  
-   查詢使用參數，但一般來說，參數組合的數目很小。 每個組合都會建立快取的查詢結果。  
  
-   查詢以天、週或月在可預測的時間執行。  
  
-   由於在透過電子郵件傳遞的報表中參考共用資料集而執行查詢，在該報表中很可能會有大批人員在短時間內按一下該連結。  
  
 下列清單提供不要快取共用資料集的範例：  
  
-   查詢結果必須永遠都包含最新的資料。  
  
-   查詢迅速執行。  
  
-   查詢不常執行。  
  
-   查詢使用參數，參數組合的數目很大，而所有組合的可能性都差不多。  
  
-   共用資料集的資料來源基礎具有提示認證或 Windows 整合式認證。  
  
-   共用資料集篩選或查詢包含參考全域集合使用者的運算式。  
  
 如果使用者所選擇的報表參數值與快取結果集所指定的預設值不同，資料集查詢會主動執行，該查詢不會使用快取結果。  
  
## <a name="caching-shared-datasets"></a>快取共用資料集  
 若要啟用共用資料集快取，您必須在共用資料集上選取快取選項。 啟用快取之後，共用資料集的查詢結果會在第一次使用時複製到快取中。 如果共用資料集具有參數，參數的每個組合都會在快取中建立新項目。  
  
 特定參數組合的查詢結果在快取中時，啟動進行處理的所有報表，以及包含具有這些參數值之共用資料集參考的所有報表，都會使用快取的資料。  
  
 您可以指定資料要在快取中保存到過期的時間。 如需詳細資訊，請參閱[使用共用快照集](../../reporting-services/work-with-shared-datasets-web-portal.md)。  
  
## <a name="preloading-the-cache"></a>預先載入快取  
 您可以透過建立快取重新整理計劃，以預先載入快取。 針對重新整理計劃，您可以使用項目特定排程或共用排程，指定重新整理的頻率。 若要避免產生多個相同項目的快取，您所指定的排程應該有足夠時間來處理外部資料來源的查詢。 例如，如果執行查詢需要 20 分鐘，則重新整理排程應該超過 20 分鐘。 如需詳細資訊，請參閱 [Schedules](../../reporting-services/subscriptions/schedules.md)。  
  
 若要建立共用資料集的快取重新整理計劃，則應具備下列條件。  
  
-   共用資料集必須已啟用快取。  
  
-   共用資料集的共用資料來源基礎不能使用提示認證或 Windows 整合式認證。  
  
-   如果共用資料集具有參數，所有未標示為唯讀的參數都必須指定靜態的預設值。 唯讀參數一律都使用預設值。 若要為多個參數組合快取共用資料集，必須分別為每個值組合建立不同的快取重新整理計劃。 參數不能包含其他資料集的參考。  
  
-   每個快取重新整理計劃都只與一個共用資料集或報表相關聯。  
  
-   您必須在共用資料集上擁有 ReadPolicy 和 UpdatePolicy 權限。  
  
 快取重新整理計劃適用於共用資料集及報表。 如需詳細資訊，請參閱 [快取報表 &#40;SSRS&#41;](../../reporting-services/report-server/caching-reports-ssrs.md)的版本中預先載入快取的唯一方法。  
  
## <a name="conditions-that-cause-cache-expiration"></a>造成快取逾期的條件  
 下列條件可能會導致共用資料集快取無效。  
  
-   排程條件過期。 發生快取逾時或已到過期時間。  
  
-   共用排程已刪除。  
  
-   變更為共用排程。 共用排程可以暫停，這也會影響快取過期時間。  
  
-   共用資料集的查詢定義已變更。  
  
-   共用資料集之共用資料來源基礎的認證已變更。  
  
-   共用資料集的快取選項已變更。  
  
-   共用資料集的唯讀參數預設值已變更。  
  
-   屬於共用資料集定義一部分的篩選已變更。  
  
-   共用資料集已從報表伺服器中刪除。 刪除共用資料集時，相關聯的快取複本和快取重新整理計劃也會一併刪除。  
  
 共用資料集的快取重新整理計劃更新不會影響已處理的報表。 更新快取重新整理計劃只會影響未來啟動而參考共用資料集的報表。  
  
## <a name="see-also"></a>另請參閱
  
 [管理共用資料集](../../reporting-services/report-data/manage-shared-datasets.md)  
  