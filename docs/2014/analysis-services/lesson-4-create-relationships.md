---
title: 第 5 課：建立關聯性 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology:
- analysis-services
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 05ebc2ffa952c0b5c927d890aad70bbf55f3c5af
ms.sourcegitcommit: f7fced330b64d6616aeb8766747295807c92dd41
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/23/2019
ms.locfileid: "62728584"
---
# <a name="lesson-5-create-relationships"></a>第 5 課：建立關聯性
  在這一課，您將驗證匯入資料時自動建立的關聯性，以及在不同資料表之間加入新的關聯性。 關聯性是在兩個資料表之間的一種連接，這種連接會建立這兩個資料表中資料相互關聯的方式。 例如，[產品] 資料表和 [產品子類別目錄] 資料表的關聯性是以每個產品都屬於某個子類別目錄為基礎。 如需詳細資訊，請參閱[關聯性 &#40;SSAS 表格式&#41;](tabular-models/relationships-ssas-tabular.md)。  
  
 估計的時間才能完成這一課：**10 分鐘**  
  
## <a name="prerequisites"></a>先決條件  
 本主題是表格式模型教學課程的一部分，必須依序完成。 執行工作之前在這一課，您應已完成上一課：[第 3 課：重新命名資料行](rename-columns.md)。  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a>檢閱現有的關聯性並加入新的關聯性  
 當您使用 [資料表匯入精靈] 匯入資料時，便會從 AdventureWorksDW 資料庫匯入七個資料表。 一般而言，如果您從關聯式來源匯入資料，現有的關聯性會與資料一起自動匯入。 不過，在您繼續撰寫模型之前，應先確認資料表之間的關聯性已正確建立。 在這個教學課程中，您會另外加入三個新的關聯性。  
  
#### <a name="to-review-existing-relationships"></a>若要檢閱現有的關聯性  
  
1.  在 [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] 中，按一下 [模型] 功能表，然後指向 [模型檢視]，再按一下 [圖表檢視]。  
  
     模型設計師現在會出現在 [圖表檢視] 中，這是一種圖形化格式，會顯示您匯入的所有資料表，而且資料表之間會線條。 資料表之間的線條表示匯入資料時自動建立的關聯性。  
  
     使用模型設計師右上方的 [迷你地圖] 控制項即可調整檢視，以便包含更多資料表。 您也可以按一下並拖曳資料表至不同位置、讓資料表彼此更靠近，或是以特定次序排列資料表。 移動資料表不會影響資料表之間已存在的關聯性。 若要檢視特定資料表中的所有資料行，可按一下並拖曳資料表邊緣，將它展開或縮小。  
  
2.  按一下 [客戶] 資料表和 [地理位置] 資料表之間的實線。 這兩個資料表之間的實線說明這個關聯性為作用中狀態，也就是說，這是在計算 DAX 公式時預設使用的關聯性。  
  
     請注意，[客戶] 資料表中的 [地理位置 ID] 資料行和 [地理位置] 資料表中的 [地理位置 ID] 資料行現在都出現在某一個方塊內。 這表示這兩個是關聯性中使用的資料行。 關聯性的屬性現在也會出現在**屬性**視窗。  
  
    > [!TIP]  
    >  除了在圖表檢視中使用模型設計師之外，您還可以使用 [管理關聯性] 對話方塊以資料表格式顯示所有資料表之間的關聯性。 按一下 [資料表] 功能表，然後按一下 [管理關聯性]。 [管理關聯性] 對話方塊會顯示匯入資料時自動建立的關聯性。  
  
3.  在圖表檢視中使用模型設計師，或是使用 [管理關聯性] 對話方塊，確認從 AdventureWorksDW 資料庫匯入各個資料表時所建立的下列關聯性：  
  
    |作用中|資料表|相關查閱資料表|  
    |------------|-----------|--------------------------|  
    |是|**客戶 [地理位置 Id]**|**Geography [Geography Id]**|  
    |是|**Product [Product Subcategory Id]**|**Product Subcategory [Product Subcategory Id]**|  
    |是|**產品子類別目錄 [產品類別目錄 Id]**|**Product Category [Product Category Id]**|  
    |是|**網際網路銷售 [客戶 Id]**|**客戶 [客戶 Id]**|  
    |是|**Internet Sales [Product Id]**|**Product [Product Id]**|  
  
 如果遺漏任何上述表格中的關聯性，請確認您的模型包含下列資料表：客戶、 日期、 地理位置、 產品、 產品類別目錄、 產品子類別目錄和網際網路銷售。 如果在不同時間從相同的資料來源連接匯入資料表，則不會建立這些資料表之間的任何關聯性，必須手動建立。  
  
 在某些情況下，您可能需要在模型中的資料表之間建立其他關聯性，以支援特定商務邏輯。 在這個教學課程中，您需要在 [網際網路銷售] 資料表和 [日期] 資料表之間建立三項額外的關聯性。  
  
#### <a name="to-add-new-relationships-between-tables"></a>若要在資料表之間加入新的關聯性  
  
1.  在模型設計師的 [網際網路銷售] 資料表中，按住 [訂單日期] 資料行，將資料指標拖曳至 [日期] 資料表中的 [日期] 資料行，然後放開。  
  
     此時會出現一條實線，表示您已在 [網際網路銷售] 資料表的 [訂單日期] 資料行和 [日期] 資料表的 [日期] 資料行之間建立了使用中的關聯性。  
  
    > [!NOTE]  
    >  建立關聯性時，主要資料表和相關查詢資料表的次序會自動正確排列。  
  
2.  在 [網際網路銷售] 資料表中，按住 [到期日] 資料行，將資料指標拖曳至 [日期] 資料表中的 [日期] 資料行，然後放開。  
  
     此時會出現一條虛線，表示您已在 [網際網路銷售] 資料表的 [到期日] 資料行和 [日期] 資料表的 [日期] 資料行之間建立了非使用中的關聯性。 資料表之間可以擁有多項關聯性，但是一次只能有一項使用中的關聯性。  
  
3.  最後，再建立一項關聯性；在 [網際網路銷售] 資料表中，按住 [出貨日期] 資料行，將資料指標拖曳至 [日期] 資料表中的 [日期] 資料行，然後放開。  
  
     此時會出現一條虛線，表示您已在 [網際網路銷售] 資料表的 [出貨日期] 資料行和 [日期] 資料表的 [日期] 資料行之間建立了非使用中的關聯性。  
  
## <a name="next-step"></a>下一個步驟  
 若要繼續這一課，請移至下一課：[第 6 課：建立計算結果的欄](lesson-5-create-calculated-columns.md)。  
  
  
