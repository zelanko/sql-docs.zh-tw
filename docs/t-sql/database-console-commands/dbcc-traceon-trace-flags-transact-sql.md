---
title: 追蹤旗標 (Transact-SQL) | Microsoft Docs
ms.custom: ''
ms.date: 03/27/2020
ms.prod: sql
ms.prod_service: sql-database
ms.reviewer: ''
ms.technology: t-sql
ms.topic: language-reference
dev_langs:
- TSQL
helpviewer_keywords:
- trace flags [SQL Server], about trace flags
- trace flags [SQL Server]
- global trace flags [SQL Server]
- flags [SQL Server]
- session trace flags [SQL Server]
- performance [SQL Server], trace
- debugging [SQL Server], trace flags
ms.assetid: b971b540-1ac2-435b-b191-24399eb88265
author: pmasl
ms.author: pelopes
ms.openlocfilehash: 3296dad876dc0f3ce95a29dc1b9f21f38db7b0a5
ms.sourcegitcommit: fc5b757bb27048a71bb39755648d5cefe25a8bc6
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/30/2020
ms.locfileid: "80402596"
---
# <a name="dbcc-traceon---trace-flags-transact-sql"></a>DBCC TRACEON - 追蹤旗標 (Transact-SQL)

[!INCLUDE[tsql-appliesto-ss2012-asdbmi-xxxx-xxx-md](../../includes/tsql-appliesto-ss2012-asdbmi-xxxx-xxx-md.md)]

追蹤旗標用來設定特定的伺服器特性，或變更特定行為。 例如，追蹤旗標 3226 是常用的啟動追蹤旗標，可隱藏錯誤記錄檔中的成功備份訊息。 追蹤旗標經常用來診斷效能問題，或是針對預存程序或複雜電腦系統進行偵錯，但 Microsoft 支援服務也可能會建議使用它們來解決對特定工作負載產生負面影響的行為。 按照指示使用時，生產環境完全支援所有記錄的追蹤旗標，以及 Microsoft 支援服務所提供的建議。 請注意，這份清單中的追蹤旗標可能有其特定使用方式的額外考量，因此建議您仔細檢閱此處及/或支援工程師提供的所有建議。 此外，如同在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中變更任何設定般，建議在部署之前，先於非生產環境中仔細測試旗標。

## <a name="remarks"></a>備註  
 在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中，追蹤旗標的使用範圍有三種：查詢、工作階段以及全域。 查詢追蹤旗標可用於特定查詢的內容。 工作階段追蹤旗標用於某個連接，而且只會在該連接顯示出來。 全域追蹤旗標是設在伺服器層級，只要是該伺服器上的連接，都看得到它們。 某些旗標只能啟用為全域旗標，某些則可以啟用為全域或工作階段範圍。  
  
 適用的規則如下：  
-   全域追蹤旗標必須全域啟用， 否則追蹤旗標就沒有效果。 建議您使用 **-T** 命令列選項，在啟動時啟用全域追蹤旗標。 這可確保追蹤旗標在伺服器重新啟動後仍維持使用中。 重新啟動 SQL Server，使追蹤旗標生效。 
-   如果追蹤旗標具有全域、工作階段或查詢的範圍，可以使用適當的範圍加以啟用。 以工作階段層級啟用的追蹤旗標絕不會影響其他工作階段，而且當開啟該工作階段的 SPID 登出時，該追蹤旗標的效果也隨之消失。  
  
您可以使用下列其中一種方法，將追蹤旗標設為開啟或關閉：
-   使用 DBCC TRACEON 和 DBCC TRACEOFF 命令。  
     例如，若要全域啟用 2528 追蹤旗標，請搭配使用 [DBCC TRACEON](../../t-sql/database-console-commands/dbcc-traceon-transact-sql.md) 和 -1 引數：`DBCC TRACEON (2528, -1)`。 使用 DBCC TRACEON 啟用的全域追蹤旗標，在伺服器重新啟動後就會失去效果。 若要關閉全域追蹤旗標，請搭配使用 [DBCC TRACEOFF](../../t-sql/database-console-commands/dbcc-traceoff-transact-sql.md) 和 -1 引數。  
-   使用 **-T** 啟動選項，指定應在啟動期間設定追蹤旗標。  
     **-T** 啟動選項會全域啟用追蹤旗標。 您不能利用啟動選項啟用工作階段層級的追蹤旗標。 這可確保追蹤旗標在伺服器重新啟動後仍維持使用中。 如需啟動選項的詳細資訊，請參閱 [Database Engine 服務啟動選項](../../database-engine/configure-windows/database-engine-service-startup-options.md)。
-   在查詢層級，請使用 QUERYTRACEON [查詢提示](https://support.microsoft.com/kb/2801413) \(機器翻譯\)。 只有下表中記錄的查詢最佳化工具追蹤旗標支援 QUERYTRACEON 選項。
  
使用 `DBCC TRACESTATUS` 命令可判斷目前有哪些使用中的追蹤旗標。

## <a name="trace-flags"></a>追蹤旗標

下表列出並描述 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中可用的追蹤旗標。 

> [!NOTE]
> Azure SQL Database 受控執行個體支援下列全域追蹤旗標：460、2301、2389、2390、2453、2467、7471、8207、9389、10316 及 11024。 受控執行個體中尚未支援工作階段追蹤旗標。
 
> [!NOTE]
> 某些追蹤旗標已導入特定的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 版本。 如需適當版本的詳細資訊，請參閱與特定追蹤旗標相關聯的 Microsoft 支援服務文章。

> [!IMPORTANT]
> 在未來的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 版本中，不一定支援追蹤旗標行為。 
  
|追蹤旗標|描述|  
|---|---|
|**101**|使合併式複寫代理程式記錄更加詳盡。<br /><br />**重要：** 僅當從命令提示字元執行 **replmerg.exe** 時，才能使用 **-T** 選項，為[複寫合併代理程式](../../relational-databases/replication/agents/replication-merge-agent.md)啟用追蹤旗標 101。<br /><br />**警告：** 追蹤旗標 101 的用途並非在生產環境中持續啟用，而是僅用於限期的疑難排解。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2892633) \(機器翻譯\)。<br /><br />**範圍**：僅複寫合併代理程式|
|**102**|使合併式複寫代理程式記錄更加詳盡，並將其導向至\<分佈伺服器>..msmerge_history  資料表。<br /><br />**重要：** 僅當從命令提示字元執行 **replmerg.exe** 時，才能使用 **-T** 選項，為[複寫合併代理程式](../../relational-databases/replication/agents/replication-merge-agent.md)啟用追蹤旗標 102。<br /><br />**警告：** 追蹤旗標 102 的用途並非在生產環境中持續啟用，而是僅用於限期的疑難排解。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2892633) \(機器翻譯\)。<br /><br />**範圍**：僅複寫合併代理程式|
|**139**| 在相容性層級較低的資料庫上分析針對特定資料類型導入之相容性層級 130 所改善的精確度和轉換邏輯時，於 [DBCC CHECKDB](../../t-sql/database-console-commands/dbcc-checkdb-transact-sql.md)、[DBCC CHECKTABLE](../../t-sql/database-console-commands/dbcc-checktable-transact-sql.md) 和 [DBCC CHECKCONSTRAINTS](../../t-sql/database-console-commands/dbcc-checkconstraints-transact-sql.md) 等 DBCC 檢查命令範圍中強制正確的轉換語意。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/help/4010261) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] RTM CU3、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 和更新版本的組建。<br /><br />**警告：** 追蹤旗標 139 不應在生產環境中持續啟用，其唯一的用途是執行資料庫驗證檢查，如 [Microsoft 支援服務文章](https://support.microsoft.com/help/4010261)中所述。 在完成驗證檢查後，應立即將它停用。<br /><br />**範圍**：只限全域|
|**174**|將 64 位元系統上的 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 計畫快取貯體計數從 40,009 增加至 160,001。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3026083) \(機器翻譯\)。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：只限全域|
|**176**|使修正解決當資料表包含計算的分割資料行時，線上重建資料表分割區會發生的錯誤。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3213683)和此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4541096)。<br /><br />**範圍**：全域或工作階段|
|**205**|當統計資料相依預存程序因自動更新統計資料而重新編譯時，回報至錯誤記錄檔。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/195565) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**260**|列印擴充預存程序動態連結程式庫 (DLL) 的版本控制相關資訊。 如需 **GetXpVersion()** 的詳細資訊，請參閱[建立擴充預存程序](../../relational-databases/extended-stored-procedures-programming/creating-extended-stored-procedures.md)。<br /><br />**範圍：** 全域或工作階段|
|**272**|當伺服器意外重新啟動或容錯移轉至次要伺服器時，停用識別預先配置以避免識別欄位的值不連貫。 請注意，識別快取可用來改善含有識別欄位之資料表上的 INSERT 效能。<br /><br />**注意：** 從 [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 開始，若要在資料庫層級完成這項作業，請參閱 [ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md) 中的 IDENTITY_CACHE 選項。<br /><br />**範圍**：只限全域|
|**460**|將資料截斷訊息識別碼 [8152](../../relational-databases/errors-events/database-engine-events-and-errors.md#errors-8000-to-8999) 取代成訊息識別碼 [2628](../../relational-databases/errors-events/database-engine-events-and-errors.md#errors-2000-to-2999)。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4468101) \(機器翻譯\)。<br /><br />從 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] CTP 2.4 開始，若要在資料庫層級完成此作業，請參閱 [ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md) 中的 VERBOSE_TRUNCATION_WARNINGS 選項。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU12 和更新版本的組建。<br /><br />**注意：** 從資料庫相容性層級 150 開始，訊息識別碼 2628 是預設值，且此追蹤旗標沒有任何作用。<br /><br />**範圍**：全域或工作階段|
|**610**|控制以最低限度方式插入索引資料表的行為。 從 SQL Server 2016 開始不需要此追蹤旗標，因為預設會針對索引資料表開啟最低限度記錄功能。 在 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 中，當大量載入作業導致系統配置新的頁面時，如果符合最低限度記錄的其他所有先決條件，則依序填滿新頁面的所有資料列會以最低限度方式記錄。 插入到現有頁面 (未配置新頁面) 以維持索引順序的資料列仍會完整記錄，這些是載入期間因頁面分割而移除的資料列。 此外也必須開啟索引的 ALLOW_PAGE_LOCKS (預設為開啟) 以啟用最低限度記錄作業，因為配置期間需要頁面鎖定，也因此只會記錄頁面或範圍配置。 如需詳細資訊，請參閱[資料載入效能指南 ](https://docs.microsoft.com/previous-versions/sql/sql-server-2008/dd425070(v=sql.100)) (英文)。<br /><br />**範圍**：全域或工作階段|
|**634**|停用背景資料行存放區壓縮工作。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 會針對含有未壓縮資料的資料行存放區索引資料列群組，定期執行 Tuple Mover 背景工作，一次壓縮一個資料列群組。<br /><br />壓縮資料行存放區可提升查詢效能，但同時也會耗用系統資源。 您可以手動控制資料行存放區的壓縮時間，方法是在您選擇的時間，停用追蹤旗標為 634 的背景壓縮工作，然後明確地叫用 ALTER INDEX...REORGANIZE 或 ALTER INDEX...REBUILD。<br /><br />**範圍：** 只限全域|
|**652**|停用頁面預先提取掃描。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：全域或工作階段|
|**661**|停用準刪除記錄移除程序。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**692**|在大量載入資料到堆積或叢集索引時停用快速插入。 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，當資料庫處於簡單或大量記錄復原模式時，預設會啟用最低限度方式記錄的快速插入，以最佳化插入記錄到新頁面的插入效能。 使用快速插入，每個大量載入批次會取得新範圍，藉由略過現有範圍可用空間的配置查閱以最佳化插入效能。<br /><br /> 使用快速插入，小批次的大量載入會導致物件耗用的未使用空間增加，因此建議您針對每個批次使用大批次以完全填滿範圍。 如果增加批次大小不可行，這個追蹤旗標能有助於減少保留的未使用空間，但會犧牲效能。 <br /><br />**注意：** 這個追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] RTM 和更新版本的組建。<br /><br />**範圍**：全域或工作階段|
|**715**|啟用資料表鎖定，以將作業大量載入到不含非叢集索引的堆積。 啟用此追蹤旗標時，大量複製資料到資料表時，大量載入作業會取得大量更新 (BU) 鎖定。 大量更新 (BU) 鎖定允許多個執行緒將資料同時大量載入到相同資料表，同時禁止未大量載入資料的其他處理序存取該資料表。<br /><br />此行為類似使用者在執行大量載入時明確指定 TABLOCK 提示，或針對大量載入的指定資料表啟用 sp_tableoption 資料表鎖定。 不過，啟用此追蹤旗標時，在不變更任何查詢或資料庫的情況下，此行為即為預設值。<br /><br />**範圍：** 全域或工作階段|
|**818**|啟用額外的 I/O 診斷，以檢查在檔案 I/O 作業期間是否有遺失寫入或過時讀取的情況。 追蹤旗標 818 會啟用記憶體內部信號緩衝區，其用來追蹤 SQL Server 執行的最後 2,048 次成功寫入作業，但不包括排序和工作檔案 I/O 作業。 當發生錯誤 605、823 或 3448 等錯誤時，內送緩衝區記錄序號 (LSN) 值會與最近的寫入清單進行比較。 如果擷取的 LSN 比寫入作業期間指定的 LSN 還舊，即會在 SQL Server 錯誤記錄檔中記錄新的錯誤訊息。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/826433) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**834**|為緩衝區集區、資料行存放區與記憶體內資料表使用大型分頁配置。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3210239) \(機器翻譯\)。<br /><br />**注意：** 當啟用時，大型分頁記憶體模型會在執行個體啟動時預先配置所有 SQLOS 記憶體，而且不會將該記憶體傳回給 OS。<br /><br />**注意：** 如果您使用 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 至 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 的資料行存放區索引功能，則不建議開啟追蹤旗標 834。 如果使用 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 和資料行存放區，請改為參閱追蹤旗標 876。<br /><br />**範圍**：只限全域|
|**845**|當 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的服務帳戶啟用「鎖定記憶體中的分頁」權限時，在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 的標準 SKU 上啟用鎖定的分頁。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/970070) \(機器翻譯\) 和[伺服器記憶體伺服器組態選項](../../database-engine/configure-windows/server-memory-server-configuration-options.md#lock-pages-in-memory-lpim)上的文件頁面。<br /><br />**注意：** 從 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 開始，預設會針對標準 SKU 啟用此行為，而且不得使用追蹤旗標 845。<br /><br />**範圍**：只限全域|
|**876**|使用資料行存放區的大型分頁配置。<br /><br />**注意：** 不同於追蹤旗標 834，使用追蹤旗標 876 並不會在執行個體啟動時預先配置 SQLOS 記憶體，而且可以釋放未使用的記憶體。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 和更新版本的組建。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：只限全域|
|**902**|安裝累計更新或 Service Pack 時略過執行資料庫升級指令碼。 如果在指令碼升級模式期間發生錯誤，建議您連絡 Microsoft SQL 客戶服務及支援 (CSS) 取得進一步指示。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2163980) \(機器翻譯\)。<br /><br />**警告：** 此追蹤旗標用於針對指令碼升級模式期間失敗的更新進行疑難排解，而且不支援在生產環境中連續執行。 資料庫升級指令碼必須順利執行，以完整安裝累積更新與 Service Pack。 否則可能會導致 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體發生未預期的問題。<br /><br />**範圍**：只限全域|
|**1117**|當檔案群組中的某個檔案達到自動成長閾值時，檔案群組中的所有檔案都會成長。 此追蹤旗標會影響所有資料庫，且僅在每個資料庫都可以安全地以相同數量增加檔案群組中的所有檔案時才建議使用。<br /><br />**注意：** 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為由 ALTER DATABASE 的 AUTOGROW_SINGLE_FILE 和 AUTOGROW_ALL_FILES 選項控制，追蹤旗標 1117 沒有任何作用。 如需詳細資訊，請參閱 [ALTER DATABASE 檔案及檔案群組選項 &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-transact-sql-file-and-filegroup-options.md)。<br /><br />**範圍：** 只限全域|
|**1118**|強制在統一範圍 (而不是混合範圍) 內進行頁面配置，以減少 SGAM 頁面上的爭用。 建立新物件時，根據預設，前八頁會從不同的範圍 (混合範圍) 進行配置。 之後若需要更多頁面時，將會從相同的範圍 (統一範圍) 加以配置。 SGAM 頁面可用以追蹤這些混合範圍，因此若出現多個混合頁面配置，它會很快地成為瓶頸。 這個追蹤旗標會在建立新物件時，從相同的範圍配置所有八個頁面，進而將掃描 SGAM 頁面的需求降到最低。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/328551) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為由 ALTER DATABASE 的 SET MIXED_PAGE_ALLOCATION 選項控制，追蹤旗標 1118 沒有任何作用。 如需詳細資訊，請參閱 [ALTER DATABASE SET 選項 &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-transact-sql-set-options.md)。<br /><br />**範圍：** 只限全域|  
|**1204**|傳回參與死結之鎖定的資源和類型，以及目前受影響的命令。 如需死結的詳細資訊，請參閱[交易鎖定與資料列版本設定指南](../../relational-databases/sql-server-transaction-locking-and-row-versioning-guide.md#deadlocks)。<br /><br />**注意：** 請避免在會導致死結的大工作負載系統上使用追蹤旗標 1204。 如需其他偵測死結方式的詳細資訊，請參閱[交易鎖定和資料列版本設定指南](../../relational-databases/sql-server-transaction-locking-and-row-versioning-guide.md#deadlock_detection)。<br /><br />**範圍：** 只限全域|  
|**1211**|停用以記憶體壓力或鎖定個數為基礎的鎖定擴大。 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 不會將資料列或頁面鎖定擴大到資料表鎖定。<br /><br />使用此追蹤旗標可能會產生過多的鎖定數目，且如果鎖定記憶體增長到一定程度，則嘗試為任何查詢配置額外的鎖定可能會失敗。 這可能會降低 [!INCLUDE[ssDE](../../includes/ssde-md.md)] 的效能，或因記憶體不足而造成 1204 錯誤 (無法配置鎖定資源)。<br /><br />如果同時設定追蹤旗標 1211 與 1224，則將會優先採用 1211。 但是，由於追蹤旗標 1211 會在每一個情況下防止鎖定擴大 (即使是在記憶體壓力下)，所以建議您改用 1224。 如此可避免在使用許多鎖定時，發生「鎖定不足」錯誤。<br /><br />如需如何解決 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中鎖定擴大所造成的封鎖問題詳細資訊，請參閱這篇 [Microsoft 支援服務文章](https://support.microsoft.com/help/323630)。<br /><br />**範圍**：全域或工作階段|  
|**1222**|以不符合任何 XSD 結構描述的 XML 格式來傳回參與死結之鎖定的資源和類型，以及目前受影響的命令。 如需死結的詳細資訊，請參閱[交易鎖定與資料列版本設定指南](../../relational-databases/sql-server-transaction-locking-and-row-versioning-guide.md#deadlocks)。<br /><br />**注意：** 請避免在會導致死結的大工作負載系統上使用追蹤旗標 1222。 如需其他偵測死結方式的詳細資訊，請參閱[交易鎖定和資料列版本設定指南](../../relational-databases/sql-server-transaction-locking-and-row-versioning-guide.md#deadlock_detection)。<br /><br />**範圍**：只限全域|  
|**1224**|停用以鎖定個數為基礎的鎖定擴大。 不過，記憶體壓力仍然可以啟動鎖定擴大。 如果鎖定物件使用的記憶體數量超出下列其中一個條件，[!INCLUDE[ssDE](../../includes/ssde-md.md)] 就會將資料列或頁面鎖定擴大至資料表 (或資料分割) 鎖定：<br /><ul><li>[!INCLUDE[ssDE](../../includes/ssde-md.md)] 所用記憶體的 40%。 只有當 sp_configure 的 **locks** 參數設為 0 時，這個條件才適用。 <li>使用 sp_configure 的 **locks** 參數設定之鎖定記憶體的 40%。 如需詳細資訊，請參閱 [伺服器設定選項 &#40;SQL Server&#41;](../../database-engine/configure-windows/server-configuration-options-sql-server.md)伺服器組態選項。</li></ul><br />如果同時設定追蹤旗標 1211 與 1224，則將會優先採用 1211。 但是，由於追蹤旗標 1211 會在每一個情況下防止鎖定擴大 (即使是在記憶體壓力下)，所以建議您最好使用 1224。 如此可避免在使用許多鎖定時，發生「鎖定不足」錯誤。<br /><br />**注意：** 您也可以使用 [ALTER TABLE](../../t-sql/statements/alter-table-transact-sql.md) 陳述式的 LOCK_ESCALATION 選項來控制鎖定擴大到資料表層級或 HoBT 層級的資料粒度。<br /><br />如需如何解決在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中鎖定擴大所造成的封鎖問題詳細資訊，請參閱這篇 [Microsoft 支援服務文章](https://support.microsoft.com/help/323630)<br /><br />**範圍：** 全域或工作階段|
|**1229**|不論 CPU 的數目為何，都會停用所有鎖定資料分割。 根據預設，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 會在伺服器具有 16 或更多個 CPU 時啟用鎖定資料分割，以改善較大型系統的延展性特性。 如需鎖定資料分割的詳細資訊，請參閱[交易鎖定和資料列版本設定指南](../../relational-databases/sql-server-transaction-locking-and-row-versioning-guide.md#lock_partitioning)。<br /><br />**警告：** 追蹤旗標 1229 可能導致執行緒同步鎖定競爭及效能不佳。<br /><br />**範圍**：只限全域|  
|**1236**|啟用資料庫鎖定資料分割。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2926217) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP3 和 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 開始，此行為由引擎控制，追蹤旗標 1236 沒有任何作用。<br /><br />**範圍**：只限全域|
|**1237**|使 ALTER PARTITION FUNCTION 陳述式遵循目前使用者定義的工作階段死結優先權，而非成為預設情況下可能的死結犧牲者。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/help/4025261) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQLv14](../../includes/sssqlv14-md.md)] 和資料庫[相容性層級](../../t-sql/statements/alter-database-transact-sql-compatibility-level.md) 140 開始，這是預設行為，追蹤旗標 1237 沒有任何作用。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**1260**|停用排程器監視器傾印。<br /><br />**範圍**：只限全域|   
|**1448**|讓複寫記錄讀取器向前移動，即使非同步次要尚未認可收到變更也一樣。 即使這個追蹤旗標已啟用，記錄讀取器一定會等候同步次要。 記錄讀取器不會超過同步次要的最小認可。 這個追蹤旗標會套用至 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體，而不只可用性群組、可用性資料庫或記錄讀取器執行個體。 立即生效，不必重新啟動。 您可以事先或在非同步次要失敗時啟動這個追蹤旗標。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/937041) \(機器翻譯\)。<br /><br />**範圍**：只限全域|   
|**1462**|停用非同步可用性群組的記錄資料流壓縮。 非同步可用性群組上預設會啟用此功能，以最佳化網路頻寬。 如需詳細資訊，請參閱 [微調可用性群組的壓縮](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)。<br /><br />**範圍**：只限全域| 
|**1800**|在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Always On 和「記錄傳送」環境中，當主要和次要複本記錄檔使用不同磁區大小的磁碟時啟用 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 最佳化。 只有在交易記錄檔位於磁區大小是 512 個位元組的磁碟上 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行個體時，才需要啟用此追蹤旗標。 在磁區大小為 4k 的磁碟上「不需」  啟用此追蹤旗標。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3009974) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP1 CU13、[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP2 CU3、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] RTM CU5 以及更新版本的組建。<br /><br />**範圍：** 只限全域|
|**2301**|啟用進階決策支援最佳化。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON) |
|**2312**|將查詢最佳化工具基數估計模型設為 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 及更新版本，根據資料庫的相容性層級。<br /><br />**注意：** 如果資料庫相容性層級低於 120，則啟用追蹤旗標 2312 會使用 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] (120) 的基數估計模型。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2801413) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'FORCE_DEFAULT_CARDINALITY_ESTIMATION' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)| 
|**2335**|使 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 假設在查詢最佳化期間，有固定的記憶體數量可供使用。 它不會限制 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 授與執行查詢的記憶體。 資料快取、查詢執行和其他取用者仍可使用為 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 設定的記憶體。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2413549) \(機器翻譯\)。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**2340**|使 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 在計劃產生時不使用排序作業 (批次排序) 以取得最佳化巢狀迴圈聯結。 根據預設，當查詢最佳化工具推斷出可能不需要排序時，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 可以使用最佳化的巢狀迴圈聯結 (而不是完整掃描或具有明確排序的巢狀迴圈聯結)，但基數或成本預估仍有可能不正確。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2009160) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'DISABLE_OPTIMIZED_NESTED_LOOP' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**2371**|將固定更新統計資料閾值變更為線性更新統計資料閾值。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2754171) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始及根據[資料庫相容性層級](../../relational-databases/databases/view-or-change-the-compatibility-level-of-a-database.md) 130 (或更高)，此行為由引擎控制，追蹤旗標 2371 沒有任何作用。<br /><br />**範圍**：只限全域|
|**2389**|針對遞增值啟用自動產生的快速統計資料 (長條圖修正)。 如果設定追蹤旗標 2389，且前置統計資料資料行標示為遞增，則在查詢編譯時將調整用來預估基數的長條圖。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2801413) \(機器翻譯\)。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**注意：** 此追蹤旗標不適用於 CE 120 版或更新版本。 請改用追蹤旗標 4139。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**2390**|針對遞增或不明值啟用自動產生的快速統計資料 (長條圖修正)。 如果設定追蹤旗標 2390，且前置統計資料資料行標示為遞增或不明，則在查詢編譯時將調整用來預估基數的長條圖。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2801413) \(機器翻譯\)。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**注意：** 此追蹤旗標不適用於 CE 120 版或更新版本。 請改用追蹤旗標 4139。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**2422**|超過 Resource Governor REQUEST_MAX_CPU_TIME_SEC 設定所設定的時間上限時，啟用 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 以中止要求。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/help/4038419) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU3 和更新版本的組建。<br /><br />**範圍**：全域|
|**2430**|啟用其他鎖定類別清除作業。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2754301) \(機器翻譯\)。<br /><br />**範圍**：只限全域| 
|**2451**|啟用 sys.dm_exec_query_plan_stats 中最後一個實際執行計畫的對等項目。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] CTP 2.4 和更新版本的組建。<br /><br />**注意：** 從 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] CTP 2.5 開始，若要在資料庫層級完成此作業，請參閱[ ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md) 中的 LAST_QUERY_PLAN_STATS 選項。<br /><br />**範圍**：只限全域|  
|**2453**|變更足夠數目的資料列時，允許資料表變數觸發重新編譯。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2952444) \(機器翻譯\)。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**2467**|根據哪個節點有最新的已配置執行緒而定，啟用替代的平行背景工作執行緒配置原則。 如需詳細資訊，請參閱[平行查詢處理](../../relational-databases/query-processing-architecture-guide.md#parallel-query-processing)。 請參閱[設定最大工作者執行緒伺服器設定選項](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md)，以取得有關如何設定最大工作者執行緒伺服器選項的詳細資訊。<br /><br />**注意：** 查詢平行處理原則程度 (DOP) 必須容納到單一節點中，才能使用此替代原則，否則會改為使用預設執行緒配置原則。 使用此追蹤旗標時，建議不要執行所指定 DOP 超過單一節點中排程器數目的查詢，因為這會干擾所指定 DOP 小於或等於單一節點中排程器數目的查詢。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：只限全域|
|**2469**|在 `INSERT INTO ... SELECT` 和磁碟分割資料行存放區索引之間啟用其他交換。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3204769) \(機器翻譯\)。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**2528**|利用 DBCC CHECKDB、DBCC CHECKFILEGROUP 和 DBCC CHECKTABLE 來停用物件的平行檢查。 依預設，查詢處理器會自動判斷平行處理原則的程度。 最大平行處理原則程度的設定方式與平行查詢相同。 如需詳細資訊，請參閱 [設定 max degree of parallelism 伺服器組態選項](../../database-engine/configure-windows/configure-the-max-degree-of-parallelism-server-configuration-option.md)。<br /><br />**注意：** 平行 DBCC 檢查通常應為啟用 (預設)。 查詢處理器會針對 DBCC CHECKDB 檢查的每份資料表或資料表批次重新評估和自動調整平行處理原則。<br /><br />一般使用案例是當系統管理員知道 DBCC CHECKDB 完成前伺服器負載會增加，因此選擇手動減少或停用平行處理原則，以增加並行的其他使用者工作負載。 不過，在 DBCC CHECKDB 中停用平行檢查，可能需要更多時間才能完成。<br /><br />**注意：** 如果使用 TABLOCK 選項執行 DBCC CHECKDB，且已停用平行處理原則，則資料表鎖定的時間可能會更長。<br /><br />**注意：** 從 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 開始，MAXDOP 選項可用來覆寫 DBCC 陳述式的 sp_configure [平行處理原則的最大程度] 設定選項。<br /><br />**範圍**：全域或工作階段|
|**2549**|強制 DBCC CHECKDB 命令以假設每個資料庫檔案都在唯一磁碟機上，但將不同實體檔案視為單一邏輯檔案。 DBCC CHECKDB 命令會跨所有資料庫檔案建立要在每個唯一磁碟機內讀取的內部分頁清單。 此邏輯判斷唯一磁碟機的依據，是每個檔案之實際檔案名稱的磁碟機代號。<br /><br />**注意：** 除非您已知每個檔案是以唯一實體磁碟為基礎，否則請勿使用此追蹤旗標。<br /><br />**注意：** 雖然此追蹤旗標可改善目標使用 PHYSICAL_ONLY 選項時的 DBCC CHECKDB 命令效能，但某些使用者可能無法察覺效能有任何改善。 此追蹤旗標可改善磁碟 I/O 資源用量，但磁碟資源的基礎效能可能會限制 DBCC CHECKDB 命令的整體效能。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2634571) \(機器翻譯\)。<br /><br />**範圍**：只限全域| 
|**2562**|無論資料庫中的索引數目為何，一律在單一「批次」中執行 DBCC CHECKDB 命令。 根據預設，DBCC CHECKDB 命令會運用「批次」概念來嘗試限制其產生的索引或「事實」數目，以將 TempDB 資源數量減到最低。 但此追蹤旗標會將所有處理強制成單一批次。<br /><br />使用此追蹤旗標的其中一個影響是 TempDB 空間需求可能會增加。 TempDB 可能成長至 DBCC CHECKDB 命令所處理使用者資料庫的 5% 或以上。<br /><br />**注意：** 雖然此追蹤旗標可改善目標使用 PHYSICAL_ONLY 選項時的 DBCC CHECKDB 命令效能，但某些使用者可能無法察覺效能有任何改善。 此追蹤旗標可改善磁碟 I/O 資源用量，但磁碟資源的基礎效能可能會限制 DBCC CHECKDB 命令的整體效能。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2634571) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**2566**|除非指定 `DATA_PURITY` 選項，否則請執行不含資料純度檢查的 DBCC CHECKDB 命令。<br /><br />**注意：** 預設會啟用資料行值的完整性檢查，而不需要 DATA_PURITY 選項。 對於從舊版 SQL Server 升級的資料庫，在毫無錯誤的情況下完成對資料庫執行 DBCC CHECKDB WITH DATA_PURITY 至少一次之前，依預設不啟用資料行值的完整性檢查。 此後，依預設 DBCC CHECKDB 會檢查資料行值的完整性。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/945770) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**2592**|搭配追蹤旗標 **3656** 使用時，在安裝 Windows 偵錯工具之後，便可以啟用堆疊傾印的符號解析。 如需詳細資訊，請參閱這篇 [Microsoft 技術白皮書](https://www.microsoft.com/download/details.aspx?id=26666)。<br /><br />**警告：** 這是偵錯追蹤旗標，不適用於生產環境。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 和更新版本的組建。 <br/><br/>**範圍**：全域和工作階段|
|**3023**|啟用 CHECKSUM 選項，做為 BACKUP 命令的預設值。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2656988) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 開始，此行為是透過設定 [備份總和檢查碼預設]  設定選項來控制。 如需詳細資訊，請參閱 [伺服器設定選項 &#40;SQL Server&#41;](../../database-engine/configure-windows/server-configuration-options-sql-server.md)伺服器組態選項。<br /><br />**範圍**：全域和工作階段|
|**3042**|略過預設備份壓縮預先配置演算法，讓備份檔案只會視需要成長以達到其最終大小。 如果您只要配置壓縮備份所需的實際大小，藉以節省空間，這個追蹤旗標就很有用。 使用此追蹤旗標可能會導致效能稍微降低 (可能會增加備份作業的持續時間)。 如需預先配置演算法的詳細資訊，請參閱[備份壓縮 &#40;SQL Server&#41;](../../relational-databases/backup-restore/backup-compression-sql-server.md)。<br /><br />**範圍**：只限全域|
|**3051**|使 SQL Server 備份至 URL 記錄到特定的錯誤記錄檔。 如需詳細資訊，請參閱 [SQL Server 備份至 URL 的最佳做法和疑難排解](../../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md)。<br /><br />**範圍**：只限全域|  
|**3205**|依預設，如果磁帶機支援硬體壓縮，DUMP 或 BACKUP 陳述式就會使用它。 當使用這個追蹤旗標時，您可以停用磁帶機的硬體壓縮。 當您要與其他不支援壓縮的站台或磁帶機交換磁帶時，這非常有用。<br /><br />**範圍**：全域或工作階段|  
|**3226**|根據預設，每項成功的備份作業都會在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 錯誤記錄檔與系統事件記錄檔中，加入一個項目。 如果您經常建立記錄備份，這些成功訊息可能會快速累積，因而產生龐大的錯誤記錄檔，讓您難以尋找其他訊息。<br /><br />透過這個追蹤旗標，您可以隱藏這些記錄項目。 如果您正執行經常記錄備份，而且沒有任何指令碼相依於這些項目，這樣做就會很有用。<br /><br />**範圍**：只限全域|   
|**3427**|修正許多連續性交易將資料插入 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 中的暫存資料表時，此作業所取用 CPU 比在 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 中更多的問題。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/help/3216543)<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 CU2 至 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2 CU2。 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2 CU3 和 [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 開始，此追蹤旗標沒有任何作用。<br /><br />**範圍**：只限全域|  
|**3459**|停用平行重做。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/help/3200975)和 [Microsoft 支援服務文章](https://support.microsoft.com/help/4101554)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)]、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 和更高版本的組建。<br /><br />**範圍**：只限全域| 
|**3468**|停用 TempDB 上的[間接檢查點](../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 CU5、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU1 和更新版本的組建。<br /><br />**範圍**：只限全域|  
|**3608**|防止 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 自動啟動並復原任何資料庫，但 **master** 資料庫除外。 若起始了需要 **TempDB** 的活動，則會復原 **model** 並建立 **TempDB**。 其他資料庫會在存取時啟動和復原。 但是，某些功能 (例如快照集隔離和讀取認可的快照集) 可能無法運作。 用於[移動系統資料庫](../../relational-databases/databases/move-system-databases.md)和[移動使用者資料庫](../../relational-databases/databases/move-user-databases.md)。<br /><br />**注意：** 請勿在一般作業期間使用。<br /><br />**範圍**：只限全域|   
|**3625**|使用 '\*\*\*\*\*\*' 來遮罩某些錯誤訊息的參數，藉以限制傳回給非 sysadmin 固定伺服器角色成員之使用者的資訊量。 這樣做有助於避免洩漏機密資訊。<br /><br />**範圍**：只限全域|  
|**3656**|在安裝 Windows 偵錯工具之後，啟用堆疊傾印的符號解析。 如需詳細資訊，請參閱這篇 [Microsoft 技術白皮書](https://www.microsoft.com/download/details.aspx?id=26666)。<br /><br />**警告：** 這是偵錯追蹤旗標，不適用於生產環境。<br /><br />**注意：** 從 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 開始，追蹤旗標 **2592** 必須與追蹤旗標 3656 一同啟用，才能啟用符號解析。 <br/><br/>**範圍**：全域和工作階段|
|**3924**|允許自動移除具有 SPID =-2 的孤立 DTC 交易 (其對部分第三方交易監視而言會產生問題)。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/help/4519668)和 [Microsoft 支援服務文章](https://support.microsoft.com/help/4511816)。<br /><br />**範圍**：只限全域|  
|**4136**|除非使用了 OPTION(RECOMPILE), WITH RECOMPILE or OPTIMIZE FOR \<value>，否則請停用參數探查。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/980653) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，若要在資料庫層級完成此操作，請參閱 [ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md) 中的 PARAMETER_SNIFFING 選項。<br /><br />若要在查詢層級達到相同結果，請新增 OPTIMIZE FOR UNKNOWN [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)。 OPTIMIZE FOR UNKNOWN 提示不會停用參數探查機制，但會有效地略過該機制，以達到相同的預期結果。<br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，在查詢層級完成此操作的第二個選項是新增 USE HINT 'DISABLE_PARAMETER_SNIFFING' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段|  
|**4137**|在 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 及更舊版本 (70) 的查詢最佳化工具基數評估模型下，當評估用來說明部分關聯性 (而非獨立) 的篩選條件 AND 述詞時，會導致 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 以最少的選擇性產生計畫。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2658214) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，在使用 CE 70 時，若要在查詢層級完成此操作，請新增 USE HINT 'ASSUME_MIN_SELECTIVITY_FOR_FILTER_ESTIMATES' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**注意：** 此追蹤旗標不適用於 CE 120 版或更新版本。 請改用追蹤旗標 9471。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)| 
|**4138**|會導致 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 產生的計劃不使用資料列目標調整來處理包含 TOP、OPTION (FAST N)、IN 或 EXISTS 關鍵字的查詢。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2667211) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'DISABLE_OPTIMIZER_ROWGOAL' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)| 
|**4139**|不論索引鍵資料行狀態為何，啟用自動產生的快速統計資料 (長條圖修正)。 如果設定追蹤旗標 4139，則不論前置統計資料資料行狀態為何 (遞增、遞增或固定)，在查詢編譯時將調整用來預估基數的長條圖。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2952101) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'ENABLE_HIST_AMENDMENT_FOR_ASC_KEYS' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**注意：** 此追蹤旗標不適用於 CE 70 版。 請改用追蹤旗標 2389 和 2390。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**4199**|<a name="4199"></a>啟用在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 累積更新和 Service Pack 中發行的「查詢最佳化工具」(QO) 修正。<br /><br />根據指定產品版本中最新的資料庫[相容性層級](../../t-sql/statements/alter-database-transact-sql-compatibility-level.md)，預設會啟用對舊版 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 所做的 QO 變更，而不啟用追蹤旗標 4199。<br /><br />下表摘要說明使用特定資料庫相容性層級和追蹤旗標 4199 時的行為。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/974006) \(機器翻譯\)。<br /><br /><table border="1" frame="void" width="550"><tr valign="middle" align="center"><td>**資料庫引擎 (DE) 版本**</td><td>**資料庫相容性層級**</td><td>**TF 4199**</td><td>**來自所有先前資料庫相容性層級的的 QO 變更**</td><td>**RTM 後 DE 版本的 QO 變更**</td></tr><tr valign="middle" align="center"><td rowspan="4">**13** ([!INCLUDE[ssSQL15](../../includes/sssql15-md.md)])</td><td rowspan="2">**100 至 120**</td><td>關閉</td><td>已停用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr><tr valign="middle" align="center"><td rowspan="2">**130** (預設值)</td><td>關閉</td><td>啟用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr><tr valign="middle" align="center"><td rowspan="6">**14** ([!INCLUDE[ssSQL17](../../includes/sssql17-md.md)])</td><td rowspan="2">**100 至 120**</td><td>關閉</td><td>已停用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr><tr valign="middle" align="center"><td rowspan="2">**130**</td><td>關閉</td><td>啟用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr><tr valign="middle" align="center"><td rowspan="2">**140** (預設值)</td><td>關閉</td><td>啟用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr><tr valign="middle" align="center"><td rowspan="6">**15** ([!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)]) 和 **12** ([!INCLUDE[ssSDSfull](../../includes/sssdsfull-md.md)])</td><td rowspan="2">**100 至 120**</td><td>關閉</td><td>已停用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr><tr valign="middle" align="center"><td rowspan="2">**130 至 140**</td><td>關閉</td><td>啟用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr><tr valign="middle" align="center"><td rowspan="2">**150** (預設值)</td><td>關閉</td><td>啟用</td><td>已停用</td></tr><tr valign="middle" align="center"><td>另一</td><td>啟用</td><td>啟用</td></tr></table><br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，若要在資料庫層級完成此作業，請參閱 [ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md) 中的 QUERY_OPTIMIZER_HOTFIXES 選項。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'ENABLE_QUERY_OPTIMIZER_HOTFIXES'[查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**重要：** 追蹤旗標 4199 不會啟用處理錯誤結果或存取違規錯誤的「查詢最佳化工具」修正。 這些修正並不被視為選擇性修正，而會在安裝更新套件之後變成預設啟用的修正。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**4610**|將儲存快取項目之雜湊表的大小增加 8 倍。 與追蹤旗標 4618 一起使用時，TokenAndPermUserStore 快取存放區中的項目數會增加至 8,192。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/959823)和此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/955644)。<br /><br />**範圍：** 只限全域|
|**4616**|讓應用程式角色可以看見伺服器層級的中繼資料。 在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 中，應用程式角色不能存取本身資料庫之外的中繼資料，因為應用程式角色與伺服器層級主體沒有關聯。 這是和舊版 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]不同的一項行為變更。 設定這個全域旗標可停用新限制，使應用程式角色可以存取伺服器層級的中繼資料。<br /><br />**範圍**：只限全域|
|**4618**|將 TokenAndPermUserStore 快取存放區中的項目數限制為 1,024。 與追蹤旗標 4610 一起使用時，TokenAndPermUserStore 快取存放區中的項目數會增加至 8,192。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/959823) \(機器翻譯\)。<br /><br />**範圍：** 只限全域|
|**4621**|將 TokenAndPermUserStore 快取存放區中專案數目限制為使用者在登錄機碼中指定的數目。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/959823) \(機器翻譯\)。<br /><br />**範圍：** 只限全域|
|**5004**|暫停 TDE 加密掃描，並導致加密掃描背景工作結束，而不執行任何工作。 資料庫會繼續處於加密狀態 (加密進行中)。 若要繼續重新加密掃描，請停用追蹤旗標 5004 並執行 ALTER DATABASE <database_name> SET ENCRYPTION ON。 <br /><br />**範圍：** 只限全域|
|**6498**|在沒有足夠記憶體可用時啟用多個大型查詢編譯，以獲得大型閘道的存取權。 此追蹤旗標可用來保留記憶體使用量，以便在受控制的情況下對傳入查詢進行編譯，避免編譯等候並行的大型查詢。 它是以 SQL Server 目標記憶體的百分之 80 為基礎，且每 25 GB 的記憶體允許一個大型查詢編譯。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3024815) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 和 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為由引擎控制，追蹤旗標 6498 沒有任何作用。<br /><br />**範圍**：只限全域|
|**6527**|在 CLR 整合中第一次發生記憶體不足的例外狀況時停用記憶體傾印的產生。 依預設，在 CLR 中第一次發生記憶體不足的例外狀況時，[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 會產生小型的記憶體傾印。 追蹤旗標的行為如下：<br /><ul><li>如果這是用來當做啟動追蹤旗標，則絕不會產生記憶體傾印。 不過，如果使用了其他的追蹤旗標，就可能產生記憶體傾印。 <li>如果在執行的伺服器上啟用這個追蹤旗標，則不會從該點開始自動產生記憶體傾印。 不過，如果因為在 CLR 中發生記憶體不足的例外狀況而已經產生記憶體傾印，這個追蹤旗標就不會有任何效果。</li></ul><br />**範圍**：只限全域|
|**6532**|使 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 與 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 中具有空間資料類型的查詢作業效能改善。 所提升的效能會依據設定、查詢類型和物件而有所不同。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3107399) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為由引擎控制，追蹤旗標 6532 沒有任何作用。<br /><br />**範圍**：全域和工作階段|
|**6533**|使 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 與 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 中具有空間資料類型的查詢作業效能改善。 所提升的效能會依據設定、查詢類型和物件而有所不同。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3107399) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為由引擎控制，追蹤旗標 6533 沒有任何作用。<br /><br />**範圍**：全域和工作階段| 
|**6534**|使 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 與 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 中具有空間資料類型的查詢作業效能改善。 所提升的效能會依據設定、查詢類型和物件而有所不同。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3107399) \(機器翻譯\)。<br /><br />**範圍**：只限全域|   
|**6545**|啟用 CLR 嚴格安全性。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4018930) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP3 CU10、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 CU6、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] RTM CU7、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 CU4 以及更新版本的組建。 從 [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 開始會依預設啟用此功能，而追蹤旗標 6545 則不會有任何作用。<br /><br />**範圍**：只限全域|
|**7314**|強制將有效位數/小數位數不明的數值視為帶有 OLE DB 提供者的雙精度浮點數值。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3051993) \(機器翻譯\)。<br /><br />**範圍**：全域和工作階段|  
|**7412**|啟用分析基礎結構的輕量型查詢執行統計資料。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3170113) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 和更新版本的組建。 從 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 開始，此追蹤旗標沒有任何作用，因為預設會啟用輕量型分析。<br /><br />**範圍**：只限全域|
|**7470**|為排序作業所需的記憶體授權啟用額外計算。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3088480) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP2 CU8、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] RTM CU10、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 CU3 以及更新版本的組建。<br /><br />**警告：** 追蹤旗標 7470 在使用排序運算子查詢時會增加記憶體需求，且可能會占用到其他並行查詢的記憶體。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**7471**|同時在單一資料表上對不同的統計資料執行多個 [UPDATE STATISTICS](../../t-sql/statements/update-statistics-transact-sql.md)。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3156157) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 和更新版本的組建。<br /><br />**範圍**：只限全域|
|**7745**|強制查詢存放區在資料庫關機時不排清資料到磁碟。<br /><br />**注意：** 使用這項追蹤可能會導致先前未排清至磁碟的查詢存放區資料在關機時遺失。 如果要將 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 關機，可以使用 SHUTDOWN WITH NOWAIT 命令取代此追蹤旗標來強制立即關機。<br /><br />**範圍**：只限全域|
|**7752**|啟用非同步載入查詢存放區。<br /><br />**注意：** 如果 [!INCLUDE[ssNoVersion](../../includes/ssNoVersion-md.md)] 有大量與查詢存放區同步載入 (資料庫復原期間的預設行為) 相關的 QDS_LOADDB 等待工作，請使用這個追蹤旗標。<br /><br />**注意：** 從 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 開始，此行為由引擎控制，追蹤旗標 7752 沒有任何作用。<br /><br />**範圍**：只限全域|
|**7806**|在 [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]上啟用專用管理員連接 (DAC)。 依預設，[!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] 上不會保留任何 DAC 資源。 如需詳細資訊，請參閱 [資料庫管理員的診斷連接](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md)。<br /><br />**範圍**：只限全域|  
|**8011**|停用資源監視器的信號緩衝區。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：全域和工作階段|
|**8012**|停用排程器的信號緩衝區。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**8015**|停用自動偵測及 NUMA 設定。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2813214) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**8018**|停用例外狀況信號緩衝區。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**8019**|停用例外狀況信號緩衝區的堆疊集合。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**8020**|停用工作集監視。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**8032**|將快取限制參數還原為 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] RTM 設定，這項設定通常會允許使用更大的快取。 當經常重複使用的快取項目無法納入快取中，以及 [針對特定工作負載最佳化伺服器組態選項](../../database-engine/configure-windows/optimize-for-ad-hoc-workloads-server-configuration-option.md) 無法解決計畫快取的問題時，請使用這項設定。<br /><br />**警告：** 如果大型快取為其他記憶體取用者 (例如緩衝集區) 提供較少的記憶體，追蹤旗標 8032 可能會導致效能降低。<br /><br />**範圍**：只限全域|   
|**8048**|將 NUMA 分割記憶體物件轉換成 CPU 分割記憶體物件。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2809338) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 和 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為是動態的且由引擎所控制。<br /><br />**範圍**：只限全域|  
|**8075**|收到 64 位元 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 或 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 的記憶體頁面配置錯誤時，請減少 [VAS](../../relational-databases/memory-management-architecture-guide.md#changes-to-memory-management-starting-2012-11x-gm) 片段。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3074434) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] RTM CU10 以及 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 CU3。 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為由引擎控制，且追蹤旗標 8075 沒有任何作用。<br /><br />**範圍**：只限全域|
|**8079**|允許 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 在每一 NUMA 節點回報 8 個或更多 CPU 的系統上質詢硬體配置及自動設定軟體式 NUMA。 自動軟體式 NUMA 會以感知超執行緒 (HT/邏輯處理器) 的方式運作。 其他節點的分割和建立可藉由增加接聽程式數目、調整以及網路和加密功能，來調整背景處理的規模。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2。 從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，此行為由引擎控制，且追蹤旗標 8079 沒有任何作用。<br /><br />**範圍**：只限全域| 
|**8099**|為執行 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 以服務許多並行使用者的高階系統，啟用執行緒同步鎖定競爭修正。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] CU2 和更新版本的組建。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4538688) \(機器翻譯\)。<br /><br />**範圍**：只限全域| 
|**8207**|啟用異動複寫和 CDC 的 singleton 更新。 訂閱者的更新可以複寫為 DELETE 和 INSERT 配對。 這可能不符合商務規則，例如引發 UPDATE 觸發程序。 使用追蹤旗標 8207 時，只影響一個資料列的唯一資料行更新 (單一更新) 會複寫為 UPDATE，而不是 DELETE 或 INSERT 配對。 如果更新影響存在唯一條件約束的資料行，或是更新影響多個資料列，更新仍會複寫為 DELETE 或 INSERT 配對。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/302341) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**8721**|當自動更新統計資料執行時回報至錯誤記錄檔。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/195565) \(機器翻譯\)。<br /><br />**範圍**：只限全域|
|**8744**|停用預先擷取巢狀迴圈運算子。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/920093) \(機器翻譯\)。<br /><br />**警告：** 如不當使用此追蹤旗標，當 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 執行包含巢狀迴圈運算子的計畫時，可能會有額外的實體讀取作業。<br /><br />**範圍**：全域和工作階段|
|**9024**|將全域記錄集區記憶體物件轉換成 NUMA 節點分割的記憶體物件。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2809338) \(機器翻譯\)。<br /><br />**注意：** 從 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP3 和 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 開始，此行為由引擎控制，追蹤旗標 9024 沒有任何作用。<br /><br />**範圍**：只限全域|
|**9347**|停用排序運算子的批次模式。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 導入新批次模式排序運算子，將提升許多分析查詢的效能。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3172787) \(機器翻譯\)。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**9349**|停用前 N 個排序運算子的批次模式。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 導入新批次模式前幾個排序運算子，將提升許多分析查詢的效能。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**9389**|啟用批次模式運算子的額外動態記憶體授與。 如果查詢無法取得其需要的所有記憶體，它會將資料溢出到 TempDB，因而產生額外的 I/O，並可能會影響查詢效能。 如果已啟用動態記憶體授與追蹤旗標，批次模式運算子可能會要求額外的記憶體，在有額外的記憶體可用時，可避免溢出到 TempDB。 如需詳細資訊，請參閱[記憶體管理架構指南](../../relational-databases/memory-management-architecture-guide.md#effects-of-min-memory-per-query)的＜min memory per query 的作用＞  一節。<br /><br />**範圍**：全域或工作階段| 
|**9398**|停用[自適性聯結](../../relational-databases/performance/intelligent-query-processing.md#batch-mode-adaptive-joins)運算子可讓選擇的[雜湊聯結或巢狀迴圈聯結](../../relational-databases/performance/joins.md)方法延後到已掃描第一個輸入之後，如 [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 中所述。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4099126) \(機器翻譯\)。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**9453**|停用批次模式執行。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/help/4016902) \(機器翻譯\)。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**9471**|在 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 及更新版本的查詢最佳化工具基數估計模型下，使 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 針對單一資料表篩選條件以最少的選擇性來產生計劃。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'ASSUME_MIN_SELECTIVITY_FOR_FILTER_ESTIMATES' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**注意：** 此追蹤旗標不適用於 CE 70 版。 請改用追蹤旗標 4137。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)| 
|**9476**|在 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 及更新版本的查詢最佳化工具基數估計模型下，使 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 以簡易內含項目假設來產生計畫，而不使用預設的基底內含項目假設。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3189675) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'ASSUME_JOIN_PREDICATE_DEPENDS_ON_FILTERS' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**注意：** 請確定您已徹底測試此選項後，再將其部署到生產環境。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)| 
|**9481**|可讓您將查詢最佳化工具基數估計模型設定為 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 和更舊版本，而不根據資料庫的相容性層級。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/2801413) \(機器翻譯\)。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 開始，若要在資料庫層級完成此操作，請參閱 [ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md) 中的 LEGACY_CARDINALITY_ESTIMATION 選項。<br /><br />從 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 開始，若要在查詢層級完成此操作，請新增 USE HINT 'FORCE_LEGACY_CARDINALITY_ESTIMATION' [查詢提示](../../t-sql/queries/hints-transact-sql-query.md)，而不要使用此追蹤旗標。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|  
|**9485**|停用 DBCC SHOW_STATISTICS 的 SELECT 權限。<br /><br />**範圍**：只限全域|
|**9488**|<a name="9488"></a>使用 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 及更新版本的查詢最佳化工具基數估計模型時，將資料表值函式的固定估計設為預設值 1 (對應 [!INCLUDE[ssKilimanjaro](../../includes/ssKilimanjaro-md.md)] 與更舊版本查詢最佳化工具基數估計模型下的預設值)。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|
|**9495**|在 INSERT...SELECT 作業的插入期間停用平行處理原則，這項規則同時套用至使用者和暫存資料表。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3180087) \(機器翻譯\)<br /><br />**範圍**：全域或工作階段| 
|**9567**|在自動植入期間，針對 Always On 可用性群組啟用資料流的壓縮。 在自動植入期間，壓縮可以大幅縮短傳輸時間，而且會增加處理器負載。 如需詳細資訊，請參閱[自動初始化 Always On 可用性群組](../../database-engine/availability-groups/windows/automatically-initialize-always-on-availability-group.md)和[微調可用性群組的壓縮](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)。<br /><br />**範圍**：全域或工作階段|
|**9571**|停用對預設資料庫路徑進行可用性群組自動植入。 如需詳細資訊，請參閱 [磁碟配置](../../database-engine/availability-groups/windows/automatic-seeding-secondary-replicas.md)。<br /><br />**範圍**：全域或工作階段| 
|**9591**|在 Always On 可用性群組中停用記錄區塊壓縮。 [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 和 [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 中的同步和非同步複本預設會使用記錄區塊壓縮。 在 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 中，只有非同步複本會使用壓縮。 <br /><br />**範圍**：全域或工作階段|
|**9592**|啟用同步可用性群組的記錄資料流壓縮。 因為壓縮會增加延遲，所以在同步可用性群組上預設會停用這項功能。 如需詳細資訊，請參閱 [微調可用性群組的壓縮](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)。<br /><br />**範圍**：全域或工作階段| 
|**9929**|將記憶體中的檢查點檔案大小減少至各 1 MB。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/3147012) \(機器翻譯\)。<br /><br />**範圍**：只限全域|  
|**9939**|在參考記憶體最佳化資料表或資料表變數的 DML 作業中，啟用平行計畫和平行掃描記憶體最佳化資料表和資料表變數 (只要它們不是 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 中 DML 作業的目標)。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4013877) \(機器翻譯\)。<br /><br />**注意：** 如果同時也明確啟用追蹤旗標 4199，則不需要追蹤旗標 9939。<br /><br />**範圍**：全域或工作階段或查詢 (QUERYTRACEON)|   
|**10204**|在資料行存放區索引重組期間停用合併/重新壓縮。 在 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 中，當重新組織資料行存放區索引時，新功能會自動將任何小型的壓縮資料列群組合併成較大的壓縮資料列群組，並重新壓縮有大量已刪除資料列的任何資料列群組。<br /><br />**注意：** 追蹤旗標 10204 不適用於在記憶體最佳化資料表上建立的資料行存放區索引。<br /><br />**範圍**：全域或工作階段|   
|**10316**|在[內部記憶體最佳化暫存時態表](../../relational-databases/tables/system-versioned-temporal-tables-with-memory-optimized-tables.md)上建立預設索引和額外的索引。 如果您有特定的查詢模式，而其中包含預設索引未涵蓋的資料行，您可以考慮加入額外的索引。<br /><br />**注意：** 記憶體最佳化資料表的系統建立版本時態表，是專為提供高交易輸送量所設計。 請留意，對負責更新或刪除目前資料表資料列的 DML 作業來說，建立額外的索引可能會造成額外負荷。 使用額外的索引，您的目標應該是在時態性查詢和 DML 額外負荷之間尋求適當的平衡。<br /><br />**範圍**：全域或工作階段|
|**11023**|針對未在 [UPDATE STATISTICS](../../t-sql/statements/update-statistics-transact-sql.md) 陳述式中明確指定採樣速率的所有後續統計資料更新，停用上次保存的採樣速率。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4039284) \(機器翻譯\)。<br /><br />**範圍**：只限全域|    
|**11024**|當任何分割區的修改次數超過總[閾值](../../relational-databases/statistics/statistics.md#AutoUpdateStats)時，使自動更新統計資料功能觸發。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4041811) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU3 和更新版本的組建。<br /><br />**範圍**：只限全域| 
|**11047**|將 `query wait (s)` 設定的預設逾時或 Resource Governor `REQUEST_MEMORY_GRANT_TIMEOUT_SEC` 組態，套用至資料行存放區索引建置作業。 如需詳細資訊，請參閱此 [Microsoft 支援服務文章](https://support.microsoft.com/kb/4480641) \(機器翻譯\)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2 CU5、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU14 和更新版本的組建。<br /><br />**範圍**：只限全域| 
|**11064**|藉由將 `SELECT` 和 `INSERT` 陳述式之間的記憶體分佈最佳化，以改善資料行存放區索引的資料載入作業可擴縮性。 如需將資料載入資料行存放區索引的詳細資訊，請參閱[資料行存放區索引 - 資料載入指導](../../relational-databases/indexes/columnstore-indexes-data-loading-guidance.md)。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 和更新版本的組建。<br /><br />**範圍**：只限全域| 
|**11068**|使用針對資料行存放區索引插入作業所設定平行處理原則的最大程度 (MAXDOP) 值。 如需覆寫平行處理原則程度的詳細資訊，請參閱[查詢處理架構指南](../../relational-databases/query-processing-architecture-guide.md#overriding-degrees-of-parallelism)。<br /><br />**重要：** 只有在同時啟用追蹤旗標 11064 時，此追蹤旗標才會生效。<br /><br />**重要：** 如果更快速載入資料比維護[資料行存放區區段](../../relational-databases/indexes/columnstore-indexes-overview.md#column-segment)品質更重要時，請使用此追蹤旗標。 例如，將 1,048,577 個資料列載入資料行存放區時，如果插入作業是以平行模式執行，則使用此追蹤旗標可能會產生多個壓縮的資料列群組。 如果沒有此追蹤旗標，則插入作業會產生一個壓縮的資料列群組。<br /><br />**注意：** 此追蹤旗標適用於 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 和更新版本的組建。<br /><br />**範圍**：只限全域| 
  
## <a name="examples"></a>範例  
 下列範例使用 DBCC TRACEON 在伺服器層級為所有工作階段設定追蹤旗標 3205。  
  
```sql  
DBCC TRACEON (3205,-1);  
```

您可以啟用由特定查詢的追蹤旗標 4199 和 4137 控制的所有計畫影響的 Hotfix。
  
```sql
SELECT x FROM correlated WHERE f1 = 0 AND f2 = 1 OPTION (QUERYTRACEON 4199, QUERYTRACEON 4137)
``` 
 
## <a name="see-also"></a>另請參閱  
[資料類型 &#40;Transact-SQL&#41;](../../t-sql/data-types/data-types-transact-sql.md)  
[DBCC INPUTBUFFER &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-inputbuffer-transact-sql.md)  
[DBCC OUTPUTBUFFER &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-outputbuffer-transact-sql.md)  
[DBCC TRACEOFF &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-traceoff-transact-sql.md)  
[DBCC TRACEON &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-traceon-transact-sql.md)  
[DBCC TRACESTATUS &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-tracestatus-transact-sql.md)  
[EXECUTE &#40;Transact-SQL&#41;](../../t-sql/language-elements/execute-transact-sql.md)  
[SELECT &#40;Transact-SQL&#41;](../../t-sql/queries/select-transact-sql.md)  
[SET NOCOUNT &#40;Transact-SQL&#41;](../../t-sql/statements/set-nocount-transact-sql.md)  
[ALTER DATABASE SET 選項 &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-transact-sql-set-options.md)  
[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)  
[查詢提示 (Transact-SQL)](../../t-sql/queries/hints-transact-sql-query.md)
