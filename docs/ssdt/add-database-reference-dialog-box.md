---
title: 加入資料庫參考對話方塊 | Microsoft Docs
ms.custom:
- SSDT
ms.date: 02/09/2017
ms.prod: sql
ms.technology: ssdt
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: conceptual
f1_keywords:
- sql.data.tools.adddatabasereference.dialog
ms.assetid: 838caa2a-4117-48bc-8c6c-9e7ceab38893
caps.latest.revision: 14
author: stevestein
ms.author: sstein
manager: craigg
ms.openlocfilehash: fcdc8c48660399bb8f753c909f6fdfa9aa243178
ms.sourcegitcommit: c8f7e9f05043ac10af8a742153e81ab81aa6a3c3
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/17/2018
ms.locfileid: "39088110"
---
# <a name="add-database-reference-dialog-box"></a>加入資料庫參考對話方塊
本主題描述可以在 [加入資料庫參考] 對話方塊中執行的程序。  
  
資料庫參考可讓您：  
  
存取其他資料庫中的物件。  
專案可以透過使用三部分或四部分名稱解析來參考任何伺服器上的其他資料庫。 當使用三部分或四部分名稱做為參考之用時，您可以使用 SQLCMD 變數來讓參考在多部伺服器和資料庫上運作。  
  
建立多個資料庫專案的複合方案。  
在複合專案中，資料庫參考會將大型資料庫分割成數個個別專案。 您可以針對資料庫或伺服器 (僅限使用一部分和兩部分名稱)，建立不包含變數或值的參考。  
  
您可以對目前方案中的資料庫專案進行資料庫參考，也可以對 DACPAC 進行資料庫參考。 在專案中新增資料庫參考會變更專案相依性和建置順序。  
  
## <a name="selecting-the-database-to-reference"></a>選取要參考的資料庫  
您可以參考相同方案中的另一個資料庫專案、系統資料庫或 DACPAC。  
  
如果方案中有一個以上的資料庫專案，就會啟用 [目前方案中的資料庫專案]。 您可以參考方案中的另一個資料庫。  
  
如果您想要選擇其中一個系統資料庫做為資料庫參考，請選取 [系統資料庫]。  
  
請選取 [資料層應用程式 (.dacpac)] 以參考 DACPAC 中的資料庫，並瀏覽至含有 DACPAC 檔案的目錄。  
  
## <a name="selecting-the-databases-relative-location"></a>選取資料庫的相對位置  
選取要參考的資料庫之後，您可以指定需要的資料庫物件位置 (相對於參考的專案)。  
  
您可以使用下面其中一個位置來解析物件的參考：  
  
- 在參考資料庫中。  
  
- 在參考資料庫以外的資料庫中，但位於相同的伺服器上。  
  
- 在參考資料庫以外的資料庫中，位於不同的伺服器上。  
  
請指定資料庫名稱。 如果您選擇 [系統資料庫]，就不應該修改系統資料庫常值。 如果您選擇 [目前方案中的資料庫專案]，則資料庫的預設名稱會以專案中資料庫的名稱為基礎。  
  
如果您選取了 [不同資料庫，不同伺服器]，請指定伺服器名稱。  
  
您可以使用 (SQLCMD) 資料庫變數。 如果您想要參考含有變數 (而不是常值名稱) 的資料庫，請接受或修改預設資料庫變數。 如果您從多部伺服器和資料庫來發行資料庫專案，資料庫變數會很有用。 在這種情況下，開發人員可以移至專案屬性頁的 [SQLCMD 變數] 並指定資料庫的本機名稱。 如果您將 [資料庫變數] 保留空白，則只能依常值名稱來參考資料庫。 如果您指定資料庫變數名稱，則無法依常值名稱來參考資料庫。  
  
如果您選取了 [不同資料庫，不同伺服器]，則會需要 (SQLCMD) 伺服器變數。 從多部伺服器和資料庫來發行資料庫專案時，伺服器變數會很有用。 在這種情況下，開發人員可以移至專案屬性頁的 [SQLCMD 變數] 並指定伺服器的本機名稱。 您只能參考含有變數的伺服器，而不能參考含有伺服器名稱的伺服器。  
  
> [!IMPORTANT]  
> 在某些情況下，您可以建立與現有資料庫參考擁有相同名稱的資料庫參考。 兩個同名的資料庫參考可能會造成非預期的行為。 在這個情況下，請刪除這兩個資料庫參考。  
  
## <a name="common-procedures"></a>常用程序  
下列是常用程序：  
  
### <a name="to-create-a-reference-to-a-database-on-the-same-server"></a>在相同伺服器上建立資料庫的參考  
  
1.  在 [方案總管] 中，以滑鼠右鍵按一下 [參考] 並選取 [加入資料庫參考]。  
  
2.  在 [加入資料庫參考] 對話方塊中，將 [資料庫位置] 指定為 [不同資料庫，相同伺服器]。  
  
3.  指定資料庫的名稱。  
  
4.  決定您是否要使用資料庫變數。  
  
5.  複製使用方式範例並貼到您的 .sql 檔案中。 在使用方式範例中，將 [Schema1] 變更為您的結構描述名稱 (例如 [dbo])。 此外，請針對您的專案適當地修改資料庫物件的名稱。  
  
6.  建置方案。  
  
### <a name="to-create-a-reference-to-a-database-on-another-server"></a>在另一個伺服器上建立資料庫的參考  
  
1.  在 [方案總管] 中，以滑鼠右鍵按一下 [參考] 並選取 [加入資料庫參考]。  
  
2.  在 [加入資料庫參考] 對話方塊中，將 [資料庫位置] 指定為 [不同資料庫，不同伺服器]。  
  
3.  確定資料庫名稱是正確的。  
  
4.  決定您是否要使用資料庫變數。  
  
5.  指定伺服器的名稱和伺服器變數。  
  
6.  複製使用方式範例並貼到您的 .sql 檔案中。 在使用方式範例中，將 [Schema1] 變更為您的結構描述名稱 (例如 [dbo])。 此外，請針對您的專案適當地修改資料庫物件的名稱。  
  
7.  建置方案。  
  
### <a name="to-create-a-composite-project"></a>建立複合專案  
  
1.  在 [方案總管] 中，以滑鼠右鍵按一下 [參考] 並選取 [加入資料庫參考]。  
  
2.  選取您參考之資料庫的來源 (方案中的專案或 DACPAC)。  
  
3.  在 [加入資料庫參考] 對話方塊中，將 [資料庫位置] 指定為 [相同資料庫]。  
  
4.  複製使用方式範例並貼到您的 .sql 檔案中。 在使用方式範例中，將 [Schema1] 變更為您的結構描述名稱。 此外，請針對您的專案適當地修改資料庫物件的名稱。  
  
5.  建置方案。  
  
當您發行這個專案時，可以將相同方案中的複合專案部署至單一目標：  
  
1.  以滑鼠右鍵按一下 [方案總管] 中的專案名稱，然後選取 [發行]，以顯示 [發行資料庫] 對話方塊。  
  
2.  在 [發行資料庫] 對話方塊中，按一下 [進階]。  
  
3.  在 [進階發行設定] 對話方塊中，確認已核取 [進階部署選項] 清單中的 [包含複合物件]。  
  
## <a name="see-also"></a>另請參閱  
[專案導向的離線資料庫開發](../ssdt/project-oriented-offline-database-development.md)  
  
